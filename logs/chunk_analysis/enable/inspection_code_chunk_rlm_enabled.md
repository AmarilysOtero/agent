# Phase 4: LLM-Generated Inspection Logic (RLM Enabled)

**Execution Time:** 2026-02-13T14:52:34.718431

**Query:** What  is the               VectorCypherRetriever

**Query Hash:** `f8ed05ca` (use to verify artifacts match current query)

**Total Inspection Programs:** 8

**Implementation:** MIT Recursive Inspection Model (RLM) - Per-Chunk Code Generation

---

## Overview

This file stores the **executable Python code** generated by the LLM per MIT RLM.
Each chunk gets its own Python function `evaluate_chunk_relevance(chunk_text: str) -> bool`
that determines if that specific chunk contains information relevant to the user's query.

### Purpose

- Generate chunk-specific relevance evaluation code
- Preserve the exact chunk text and first read passed to the model
- Record the chunk-scoped recursive text used for Phase 4 (defaults to first read)

### Usage

These functions are executed by the recursive summarizer to evaluate each chunk individually.

---

## 1. File (ID: unknown)


### 1.1 Chunk: graph_connection_0

**Evaluation Time:** 2026-02-13T14:52:34.838431

**Query:** What  is the               VectorCypherRetriever

**Selection Method:** discarded

```python
def evaluate_chunk_relevance(chunk_text: str) -> bool:
    """Fallback relevance filter based on query terms (intent-aware stopwords)."""
    if not chunk_text.strip():
        return False
    text_lower = chunk_text.lower()
    query_terms = ['vectorcypherretriever']
    if not query_terms:
        return False
    # Require at least one content token match
    return any(term in text_lower for term in query_terms)
```
#### Chunk Text
```text
VectorCypher Retriever in Practice and VectorCypher Retrieval: A Working Example are connected: both have instance of relationship with SectionType '437'
```
#### First Read
```text
VectorCypher Retriever in Practice and VectorCypher Retrieval: A Working Example are connected: both have instance of relationship with SectionType '437'
```
#### Recursive Text
```text
VectorCypher Retriever in Practice and VectorCypher Retrieval: A Working Example are connected: both have instance of relationship with SectionType '437'
```
#### Keywords
`vectorcypherretriever`

---

## 2. File (ID: 8dcd8cd1-62c4-4607-b0bc-ffce165cbf0b:C:\Alexis\DXC\AI\RAG\Developers-Guide-GraphRAG.pdf)


### 2.1 Chunk: 8dcd8cd1-62c4-4607-b0bc-ffce165cbf0b:C:\Alexis\DXC\AI\RAG\Developers-Guide-GraphRAG.pdf:chunk:89

**Evaluation Time:** 2026-02-13T14:52:34.839508

**Query:** What  is the               VectorCypherRetriever

**Selection Method:** discarded

```python
def evaluate_chunk_relevance(chunk_text: str) -> bool:
    """Fallback relevance filter based on query terms (intent-aware stopwords)."""
    if not chunk_text.strip():
        return False
    text_lower = chunk_text.lower()
    query_terms = ['vectorcypherretriever']
    if not query_terms:
        return False
    # Require at least one content token match
    return any(term in text_lower for term in query_terms)
```
#### Chunk Text
```text
VectorCypher Retriever in Practice
structural search.

The result: You can ask complex, context-aware questions about entities in your own industry. The GraphRAG retriever will surface relevant information that connects context across structured and unstructured data to drive real-world understanding.

With this in mind, let's look at another VectorCypherRetriever example.



## VectorCypher Retrieval: A Working Example

Which Asset Managers are most affected by reseller concerns?

Let's again start with the Chunks semantically similar to 'reseller concerns,' and then traverse through the Document to the Company through OWNS to identify the AssetManagers relevant to the query. We'll also include the property shares from the relationship OWNS and order by largest holdings.


Figure 28. VectorCypherRetriever example 2


Next, add this new retrieval query to the VectorCypherRetriever parameters:
```
#### First Read
```text
VectorCypher Retriever in Practice
structural search.

The result: You can ask complex, context-aware questions about entities in your own industry. The GraphRAG retriever will surface relevant information that connects context across structured and unstructured data to drive real-world understanding.

With this in mind, let's look at another VectorCypherRetriever example.



## VectorCypher Retrieval: A Working Example

Which Asset Managers are most affected by reseller concerns?

Let's again s
```
#### Recursive Text
```text
VectorCypher Retriever in Practice
structural search.

The result: You can ask complex, context-aware questions about entities in your own industry. The GraphRAG retriever will surface relevant information that connects context across structured and unstructured data to drive real-world understanding.

With this in mind, let's look at another VectorCypherRetriever example.



## VectorCypher Retrieval: A Working Example

Which Asset Managers are most affected by reseller concerns?

Let's again s
```
#### Keywords
`vectorcypherretriever`

### 2.2 Chunk: 8dcd8cd1-62c4-4607-b0bc-ffce165cbf0b:C:\Alexis\DXC\AI\RAG\Developers-Guide-GraphRAG.pdf:chunk:84

**Evaluation Time:** 2026-02-13T14:52:34.959508

**Query:** What  is the               VectorCypherRetriever

**Selection Method:** discarded

```python
def evaluate_chunk_relevance(chunk_text: str) -> bool:
    """Fallback relevance filter based on query terms (intent-aware stopwords)."""
    if not chunk_text.strip():
        return False
    text_lower = chunk_text.lower()
    query_terms = ['vectorcypherretriever']
    if not query_terms:
        return False
    # Require at least one content token match
    return any(term in text_lower for term in query_terms)
```
#### Chunk Text
```text
The Graph-Enhanced Vector Search Pattern
The basic retriever pattern typically relies on textbased embeddings, capturing only the semantic meaning of content. While this method is effective in identifying similar chunks, it leaves the LLM in the dark as to how those items interact in the real world.

The Graph-Enhanced Vector Search Pattern, also known as augmented vector search, overcomes this limitation by drawing on the graph structure (i.e., using not just what items are but also how they connect). By embedding node positions and relationships within a graph, this approach generates contextually relevant nodes, integrating both:

-  Unstructured data: Product descriptions, customer reviews, and other text content via semantic similarity
-  Structured data: Purchase patterns, category relationships, and transaction records via explicit instructions

The VectorCypherRetriever uses the full graph capabilities of Neo4j by combining vector-based similarity searches with graph traversal techniques. The retriever completes the following actions:
```
#### First Read
```text
The Graph-Enhanced Vector Search Pattern
The basic retriever pattern typically relies on textbased embeddings, capturing only the semantic meaning of content. While this method is effective in identifying similar chunks, it leaves the LLM in the dark as to how those items interact in the real world.

The Graph-Enhanced Vector Search Pattern, also known as augmented vector search, overcomes this limitation by drawing on the graph structure (i.e., using not just what items are but also how they co
```
#### Recursive Text
```text
The Graph-Enhanced Vector Search Pattern
The basic retriever pattern typically relies on textbased embeddings, capturing only the semantic meaning of content. While this method is effective in identifying similar chunks, it leaves the LLM in the dark as to how those items interact in the real world.

The Graph-Enhanced Vector Search Pattern, also known as augmented vector search, overcomes this limitation by drawing on the graph structure (i.e., using not just what items are but also how they co
```
#### Keywords
`vectorcypherretriever`

### 2.3 Chunk: 8dcd8cd1-62c4-4607-b0bc-ffce165cbf0b:C:\Alexis\DXC\AI\RAG\Developers-Guide-GraphRAG.pdf:chunk:88

**Evaluation Time:** 2026-02-13T14:52:35.079508

**Query:** What  is the               VectorCypherRetriever

**Selection Method:** discarded

```python
def evaluate_chunk_relevance(chunk_text: str) -> bool:
    """Fallback relevance filter based on query terms (intent-aware stopwords)."""
    if not chunk_text.strip():
        return False
    text_lower = chunk_text.lower()
    query_terms = ['vectorcypherretriever']
    if not query_terms:
        return False
    # Require at least one content token match
    return any(term in text_lower for term in query_terms)
```
#### Chunk Text
```text
VectorCypher Retriever in Practice
eports (text) with the graph relationships between vulnerabilities, affected assets, and mitigation strategies to provide a holistic view of your security posture.
-  Education: Map student essays or discussion posts to learning objectives, course materials, and assessment outcomes for personalized education analytics.

Let's summarize the major tasks from  this example so you can apply it to your domain:

-  Adapt the Pattern Model Your Domain: Define the node types, relationships, and key properties relevant to your vertical (e.g., Patient, Diagnosis, Product, Supplier, Case, Asset, etc.).
- Index the Right Data: Create vector indexes on the appropriate text or document nodes for semantic retrieval.
-  Craft Domain-Specific Cypher Queries: Write Cypher queries that traverse from the retrieved nodes to related entities and/or relationships that matter in your context.
-  Integrate With VectorCypherRetriever: Use the VectorCypherRetriever with your custom query to combine semantic and structural search.

The result: You can ask complex, context-aware questions about entities in your own industry. The GraphRAG retriever will surface relevant information that connects context across
```
#### First Read
```text
VectorCypher Retriever in Practice
eports (text) with the graph relationships between vulnerabilities, affected assets, and mitigation strategies to provide a holistic view of your security posture.
-  Education: Map student essays or discussion posts to learning objectives, course materials, and assessment outcomes for personalized education analytics.

Let's summarize the major tasks from  this example so you can apply it to your domain:

-  Adapt the Pattern Model Your Domain: Define the node
```
#### Recursive Text
```text
VectorCypher Retriever in Practice
eports (text) with the graph relationships between vulnerabilities, affected assets, and mitigation strategies to provide a holistic view of your security posture.
-  Education: Map student essays or discussion posts to learning objectives, course materials, and assessment outcomes for personalized education analytics.

Let's summarize the major tasks from  this example so you can apply it to your domain:

-  Adapt the Pattern Model Your Domain: Define the node
```
#### Keywords
`vectorcypherretriever`

### 2.4 Chunk: 8dcd8cd1-62c4-4607-b0bc-ffce165cbf0b:C:\Alexis\DXC\AI\RAG\Developers-Guide-GraphRAG.pdf:chunk:86

**Evaluation Time:** 2026-02-13T14:52:35.199508

**Query:** What  is the               VectorCypherRetriever

**Selection Method:** discarded

```python
def evaluate_chunk_relevance(chunk_text: str) -> bool:
    """Fallback relevance filter based on query terms (intent-aware stopwords)."""
    if not chunk_text.strip():
        return False
    text_lower = chunk_text.lower()
    query_terms = ['vectorcypherretriever']
    if not query_terms:
        return False
    # Require at least one content token match
    return any(term in text_lower for term in query_terms)
```
#### Chunk Text
```text
VectorCypherRetriever parameters:
- Driver : The Neo4j database connection
- Index\_name : The name of the vector index (here, chunkEmbeddings ) used for semantic search
- Embedder : The embedding model used to generate/query vector representations
- Retrieval\_query : The Cypher query (defined above) that tells Neo4j how to traverse the graph from the semantically matched nodes

This setup enables you to start with a semantic search (e.g., for 'cryptocurrency risk') and automatically traverse your knowledge graph to reveal which companies are involved and what other risks they face. The resulting responses are both semantically relevant and graph-aware.
```
#### First Read
```text
VectorCypherRetriever parameters:
- Driver : The Neo4j database connection
- Index\_name : The name of the vector index (here, chunkEmbeddings ) used for semantic search
- Embedder : The embedding model used to generate/query vector representations
- Retrieval\_query : The Cypher query (defined above) that tells Neo4j how to traverse the graph from the semantically matched nodes

This setup enables you to start with a semantic search (e.g., for 'cryptocurrency risk') and automatically traverse y
```
#### Recursive Text
```text
VectorCypherRetriever parameters:
- Driver : The Neo4j database connection
- Index\_name : The name of the vector index (here, chunkEmbeddings ) used for semantic search
- Embedder : The embedding model used to generate/query vector representations
- Retrieval\_query : The Cypher query (defined above) that tells Neo4j how to traverse the graph from the semantically matched nodes

This setup enables you to start with a semantic search (e.g., for 'cryptocurrency risk') and automatically traverse y
```
#### Keywords
`vectorcypherretriever`

### 2.5 Chunk: 8dcd8cd1-62c4-4607-b0bc-ffce165cbf0b:C:\Alexis\DXC\AI\RAG\Developers-Guide-GraphRAG.pdf:chunk:91

**Evaluation Time:** 2026-02-13T14:52:35.319508

**Query:** What  is the               VectorCypherRetriever

**Selection Method:** discarded

```python
def evaluate_chunk_relevance(chunk_text: str) -> bool:
    """Fallback relevance filter based on query terms (intent-aware stopwords)."""
    if not chunk_text.strip():
        return False
    text_lower = chunk_text.lower()
    query_terms = ['vectorcypherretriever']
    if not query_terms:
        return False
    # Require at least one content token match
    return any(term in text_lower for term in query_terms)
```
#### Chunk Text
```text
VectorCypherRetriever parameters:
- Driver : The Neo4j database connection
- Index\_name: The name of the vector index (here, chunkEmbeddings ) used for semantic search


- Embedder: The embedding model used to generate/query vector representations
- Retrieval\_query: The Cypher query (defined above) that tells Neo4j how to traverse the graph from the semantically matched nodes

```
result = vector_cypher_retriever.search(query_text=query, top_k=10) for item in result.items: print(item.content[:100])
```
```
#### First Read
```text
VectorCypherRetriever parameters:
- Driver : The Neo4j database connection
- Index\_name: The name of the vector index (here, chunkEmbeddings ) used for semantic search


- Embedder: The embedding model used to generate/query vector representations
- Retrieval\_query: The Cypher query (defined above) that tells Neo4j how to traverse the graph from the semantically matched nodes

```
result = vector_cypher_retriever.search(query_text=query, top_k=10) for item in result.items: print(item.content[:
```
#### Recursive Text
```text
VectorCypherRetriever parameters:
- Driver : The Neo4j database connection
- Index\_name: The name of the vector index (here, chunkEmbeddings ) used for semantic search


- Embedder: The embedding model used to generate/query vector representations
- Retrieval\_query: The Cypher query (defined above) that tells Neo4j how to traverse the graph from the semantically matched nodes

```
result = vector_cypher_retriever.search(query_text=query, top_k=10) for item in result.items: print(item.content[:
```
#### Keywords
`vectorcypherretriever`

### 2.6 Chunk: 8dcd8cd1-62c4-4607-b0bc-ffce165cbf0b:C:\Alexis\DXC\AI\RAG\Developers-Guide-GraphRAG.pdf:chunk:87

**Evaluation Time:** 2026-02-13T14:52:35.439508

**Query:** What  is the               VectorCypherRetriever

**Selection Method:** discarded

```python
def evaluate_chunk_relevance(chunk_text: str) -> bool:
    """Fallback relevance filter based on query terms (intent-aware stopwords)."""
    if not chunk_text.strip():
        return False
    text_lower = chunk_text.lower()
    query_terms = ['vectorcypherretriever']
    if not query_terms:
        return False
    # Require at least one content token match
    return any(term in text_lower for term in query_terms)
```
#### Chunk Text
```text
VectorCypher Retriever in Practice
The power of the Graph-Enhanced Vector Search Pattern lies in its flexibility. While the example above focuses on linking companies to risk factors in financial filings, the approach can be applied to any domain or vertical by customizing the graph schema and Cypher queries.

How might this look for other industries?

- Healthcare: Retrieve patient records, diagnoses, and treatment plans by combining semantic search of clinical notes with graph traversal across relationships like doctorpatient, medication-prescribed, or symptomdiagnosis.
-  Ecommerce: Connect customer reviews or product descriptions (unstructured text) to

purchase behavior, category hierarchies, or supplier relationships (a structured graph), enabling recommendations and/or supply chain insights.

- Law: Link case law or legal opinions to statutes, precedents, and involved parties, surfacing not just relevant text but also the legal context and network of citations.
-  Cybersecurity: Combine threat intelligence reports (text) with the graph relationships between vulnerabilities, affected assets, and mitigation strategies to provide a holistic view of your security posture.
-  Education: Map student essays or
```
#### First Read
```text
VectorCypher Retriever in Practice
The power of the Graph-Enhanced Vector Search Pattern lies in its flexibility. While the example above focuses on linking companies to risk factors in financial filings, the approach can be applied to any domain or vertical by customizing the graph schema and Cypher queries.

How might this look for other industries?

- Healthcare: Retrieve patient records, diagnoses, and treatment plans by combining semantic search of clinical notes with graph traversal across
```
#### Recursive Text
```text
VectorCypher Retriever in Practice
The power of the Graph-Enhanced Vector Search Pattern lies in its flexibility. While the example above focuses on linking companies to risk factors in financial filings, the approach can be applied to any domain or vertical by customizing the graph schema and Cypher queries.

How might this look for other industries?

- Healthcare: Retrieve patient records, diagnoses, and treatment plans by combining semantic search of clinical notes with graph traversal across
```
#### Keywords
`vectorcypherretriever`

### 2.7 Chunk: 8dcd8cd1-62c4-4607-b0bc-ffce165cbf0b:C:\Alexis\DXC\AI\RAG\Developers-Guide-GraphRAG.pdf:chunk:98

**Evaluation Time:** 2026-02-13T14:52:35.559508

**Query:** What  is the               VectorCypherRetriever

**Selection Method:** discarded

```python
def evaluate_chunk_relevance(chunk_text: str) -> bool:
    """Fallback relevance filter based on query terms (intent-aware stopwords)."""
    if not chunk_text.strip():
        return False
    text_lower = chunk_text.lower()
    query_terms = ['vectorcypherretriever']
    if not query_terms:
        return False
    # Require at least one content token match
    return any(term in text_lower for term in query_terms)
```
#### Chunk Text
```text
Text2CypherRetriever
ll help you integrate Text2Cypher effectively while ensuring that it is used in scenarios where its strengths outweigh its potential drawbacks.

Check out the Text2Cypher Crowdsourcing App to explore Text2Cypher applications and contribute to development projects.
```
#### First Read
```text
Text2CypherRetriever
ll help you integrate Text2Cypher effectively while ensuring that it is used in scenarios where its strengths outweigh its potential drawbacks.

Check out the Text2Cypher Crowdsourcing App to explore Text2Cypher applications and contribute to development projects.
```
#### Recursive Text
```text
Text2CypherRetriever
ll help you integrate Text2Cypher effectively while ensuring that it is used in scenarios where its strengths outweigh its potential drawbacks.

Check out the Text2Cypher Crowdsourcing App to explore Text2Cypher applications and contribute to development projects.
```
#### Keywords
`vectorcypherretriever`

---
